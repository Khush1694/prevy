<% cache [events, events_count > 9] do %>

  <div class="container-fluid bg-light">
    <div class="container upcoming-events-container">

      <div class="row">
        <div class="col-md-12 mb-2rem">

          <div class="row mt-2">
            <div class="col">

              <h2 class="text-center">Upcoming Events</h2>

              <% if !events.empty? %>

                <div class="row d-flex justify-content-center">
                  <div class="col-md-12">
                    <%= render partial: "group_event",
                      collection: events, as: :event, cached: true %>
                  </div>
                </div>

              <% else %>

                <h3 class="h5 text-center mt-5">
                  There are no upcoming events.
                </h3>

              <% end %>

              <% if events_count > 9 %>

                <div class="row">
                  <div class="col-auto mx-auto mt-2rem">
                    <%= link_to "See more upcoming events",
                      group_events_path(group),
                      class: "btn btn-primary btn-lg" %>
                  </div>
                </div>

              <% end %>

            </div>
          </div>

          <% if current_user.has_role? :organizer %>

            <div class="row mt-2rem mb-2">
              <div class="col text-center">
                <%= link_to "Create event",
                  new_group_event_path(group, group_name: group.name, group_id: group.id),
                    class: "btn btn-primary btn-lg" %>
              </div>
            </div>

          <% end %>

        </div>
      </div><!-- /.row -->

    </div>
  </div>

<% end %>
