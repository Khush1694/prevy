<div class="d-flex flex-row topic-row" id="topic-<%= topic.id %>">

  <div class="topic__avatar member-image mr-3">
    <div class="intrinsic-ratio-container
      intrinsic-ratio-container--square">
      <%= link_to user_path(topic.user), class: "display-block" do %>
        <%= image_tag gravatar_image_url(topic.user.email),
          class: "lazyload blur-up
            img-fluid intrinsic-ratio-image user-avatar d-block",
          alt: topic.user.name %>
      <% end %>
    </div>
  </div>

  <div class="d-flex flex-column flex-md-row w-100">
    <div class="topic__info">
      <h3 class="lead">
        <% if topic.type? %>
          <strong class="text-uppercase">
            <%= topic.type_presentable %>:
          </strong>
        <% end %>

        <%= link_to topic.title,
          group_topic_path(group, topic) %>
      </h3>
      <span class="topic__date">
        Opened
        <%= local_time_ago(topic.created_at) %>
      </span>
      <span class="d-block d-md-inline">
        by <%= link_to topic.user.name, user_path(topic.user),
          class: "text-dark" %>
      </span>
    </div>

    <div class="topic__comments-count text-md-center mt-1 mt-md-0">
      <%= link_to group_topic_path(group, topic),
        class: "d-block text-dark" do %>
        <div class="d-inline-block d-md-block lead mb-1">
          <%= topic.topic_comments.count %>
        </div>
        <div class="d-inline-block d-md-block">
          <%= "comment".pluralize(topic.topic_comments.count) %>
        </div>
      <% end %>
    </div>
  </div>

</div><!-- /.topic-row -->

<% unless topic == topics.last %>
  <hr>
<% end %>
